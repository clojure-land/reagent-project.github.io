<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><base href="../"/><link href="css/built.css?1489184436743" rel="stylesheet"/><title>Reagent: Cloact becomes Reagent: Undo is trivial</title></head><body><div id="main-content"><div><div data-reactroot="" data-reactid="1" data-react-checksum="186604998"><div class="nav" data-reactid="2"><ul class="nav" data-reactid="3"><li class="brand" data-reactid="4"><a href="index.html" data-reactid="5">Reagent:</a></li><li data-reactid="6"><a href="index.html" data-reactid="7">Intro</a></li><li data-reactid="8"><a href="news/index.html" data-reactid="9">News</a></li><li data-reactid="10"><a href="https://github.com/reagent-project/reagent" data-reactid="11">GitHub</a></li><li data-reactid="12"><a href="http://blog.ducky.io/reagent-docs/index.html" data-reactid="13">API</a></li></ul></div><div data-reactid="14"></div><div class="reagent-demo" data-reactid="15"><h1 data-reactid="16"><a href="news/cloact-reagent-undo-demo.html" data-reactid="17">Cloact becomes Reagent: Undo is trivial</a></h1><div class="demo-text" data-reactid="18"><h2 data-reactid="19">(reset! cloact-name &quot;Reagent&quot;)</h2><p data-reactid="20">It turns out that ”Cloact” was a really, really bad
      name. It made some people think about birds’ behinds, in
      possibly unhealthy ways, which even Google suggested they
      should.</p><p data-reactid="21"><!-- react-text: 22 -->The new name is <!-- /react-text --><strong data-reactid="23">Reagent</strong><!-- react-text: 24 -->, which hopefully
      doesn’t bring with it the same disgusting connotations.<!-- /react-text --></p><p data-reactid="25">The API is otherwise unchanged, so a simple
      search-and-replace should suffice.</p><div class="demo-text" data-reactid="26"><h2 data-reactid="27">Undo the easy way</h2><p data-reactid="28">To celebrate the undoing of the apparently disgusting
         name, here is an example of how easy it is to add undo
         functionality to Reagent components.</p><p data-reactid="29">It simply saves the old state whenever it changes, and
         restores it when the button is clicked.</p><p data-reactid="30">The really nice thing about ClojureScript is that not
         only is this easy and safe to do, courtesy of immutable data
         structures, it is also efficient. ClojureScript figures out
         how to represent ”changes” to maps and vectors efficiently,
         so that you won’t have to.</p><div data-reactid="31"><div class="demo-example clearfix" data-reactid="32"><a class="demo-example-hide" data-reactid="33">hide</a><h3 class="demo-heading" data-reactid="34">Example </h3><div class="simple-demo" data-reactid="35"><div data-reactid="36"><input type="button" disabled="" value="Undo (0)" data-reactid="37"/><div data-reactid="38"><section id="todoapp" data-reactid="39"><header id="header" data-reactid="40"><h1 data-reactid="41">todos</h1><input type="text" id="new-todo" placeholder="What needs to be done?" value="" data-reactid="42"/></header><div data-reactid="43"><section id="main" data-reactid="44"><input type="checkbox" checked="" id="toggle-all" data-reactid="45"/><label for="toggle-all" data-reactid="46">Mark all as complete</label><ul id="todo-list" data-reactid="47"><li class="completed " data-reactid="48"><div class="view" data-reactid="49"><input type="checkbox" checked="" class="toggle" data-reactid="50"/><label data-reactid="51">Rename Cloact to Reagent</label><button class="destroy" data-reactid="52"></button></div></li><li class="completed " data-reactid="53"><div class="view" data-reactid="54"><input type="checkbox" checked="" class="toggle" data-reactid="55"/><label data-reactid="56">Add undo demo</label><button class="destroy" data-reactid="57"></button></div></li><li class="completed " data-reactid="58"><div class="view" data-reactid="59"><input type="checkbox" checked="" class="toggle" data-reactid="60"/><label data-reactid="61">Make all rendering async</label><button class="destroy" data-reactid="62"></button></div></li><li class="completed " data-reactid="63"><div class="view" data-reactid="64"><input type="checkbox" checked="" class="toggle" data-reactid="65"/><label data-reactid="66">Allow any arguments to component functions</label><button class="destroy" data-reactid="67"></button></div></li></ul></section><footer id="footer" data-reactid="68"><div data-reactid="69"><span id="todo-count" data-reactid="70"><strong data-reactid="71">0</strong><!-- react-text: 72 --> <!-- /react-text --><!-- react-text: 73 -->items<!-- /react-text --><!-- react-text: 74 --> left<!-- /react-text --></span><ul id="filters" data-reactid="75"><li data-reactid="76"><a class="selected" data-reactid="77">All</a></li><li data-reactid="78"><a data-reactid="79">Active</a></li><li data-reactid="80"><a data-reactid="81">Completed</a></li></ul><button id="clear-completed" data-reactid="82"><!-- react-text: 83 -->Clear completed <!-- /react-text --><!-- react-text: 84 -->4<!-- /react-text --></button></div></footer></div></section><footer id="info" data-reactid="85"><p data-reactid="86">Double-click to edit a todo</p></footer></div></div></div></div><div class="demo-source clearfix" data-reactid="87"><h3 class="demo-heading" data-reactid="88">Source</h3><pre data-reactid="89"><pre data-reactid="90"><span style="color:#272;" data-reactid="91">(</span><span style="color:#687868;font-weight:bold;" data-reactid="92">ns</span><!-- react-text: 93 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="94">example</span><!-- react-text: 95 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="96">(</span><span style="color:blue;" data-reactid="97">:require</span><!-- react-text: 98 --> <!-- /react-text --><span style="color:#44a;" data-reactid="99">[</span><!-- react-text: 100 -->reagent.core <!-- /react-text --><span style="color:blue;" data-reactid="101">:as</span><!-- react-text: 102 --> r<!-- /react-text --><span style="color:#44a;" data-reactid="103">]</span><span style="color:#940;" data-reactid="104">)</span><span style="color:#272;" data-reactid="105">)</span></pre><pre data-reactid="106"><span style="color:#272;" data-reactid="107">(</span><span style="color:#687868;font-weight:bold;" data-reactid="108">def</span><!-- react-text: 109 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="110">state</span><!-- react-text: 111 --> <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="112">todomvc/todos</span><span style="color:#272;" data-reactid="113">)</span><!-- react-text: 114 -->

<!-- /react-text --><span style="color:#272;" data-reactid="115">(</span><span style="color:#687868;font-weight:bold;" data-reactid="116">def</span><!-- react-text: 117 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="118">undo-list</span><!-- react-text: 119 --> <!-- /react-text --><span style="color:#940;" data-reactid="120">(</span><span style="color:#687868;font-weight:bold;" data-reactid="121">r/atom</span><!-- react-text: 122 --> nil<!-- /react-text --><span style="color:#940;" data-reactid="123">)</span><span style="color:#272;" data-reactid="124">)</span><!-- react-text: 125 -->

<!-- /react-text --><span style="color:#272;" data-reactid="126">(</span><span style="color:#687868;font-weight:bold;" data-reactid="127">defn</span><!-- react-text: 128 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="129">undo</span><!-- react-text: 130 --> <!-- /react-text --><span style="color:#940;" data-reactid="131">[</span><span style="color:#940;" data-reactid="132">]</span><!-- react-text: 133 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="134">(</span><span style="color:#687868;font-weight:bold;" data-reactid="135">let</span><!-- react-text: 136 --> <!-- /react-text --><span style="color:#44a;" data-reactid="137">[</span><!-- react-text: 138 -->undos @undo-list<!-- /react-text --><span style="color:#44a;" data-reactid="139">]</span><!-- react-text: 140 -->
    <!-- /react-text --><span style="color:#44a;" data-reactid="141">(</span><span style="color:#687868;font-weight:bold;" data-reactid="142">when-let</span><!-- react-text: 143 --> <!-- /react-text --><span style="color:#272;" data-reactid="144">[</span><!-- react-text: 145 -->old <!-- /react-text --><span style="color:#940;" data-reactid="146">(</span><span style="color:#687868;font-weight:bold;" data-reactid="147">first</span><!-- react-text: 148 --> undos<!-- /react-text --><span style="color:#940;" data-reactid="149">)</span><span style="color:#272;" data-reactid="150">]</span><!-- react-text: 151 -->
      <!-- /react-text --><span style="color:#272;" data-reactid="152">(</span><span style="color:#687868;font-weight:bold;" data-reactid="153">reset!</span><!-- react-text: 154 --> state old<!-- /react-text --><span style="color:#272;" data-reactid="155">)</span><!-- react-text: 156 -->
      <!-- /react-text --><span style="color:#272;" data-reactid="157">(</span><span style="color:#687868;font-weight:bold;" data-reactid="158">reset!</span><!-- react-text: 159 --> undo-list <!-- /react-text --><span style="color:#940;" data-reactid="160">(</span><span style="color:#687868;font-weight:bold;" data-reactid="161">rest</span><!-- react-text: 162 --> undos<!-- /react-text --><span style="color:#940;" data-reactid="163">)</span><span style="color:#272;" data-reactid="164">)</span><span style="color:#44a;" data-reactid="165">)</span><span style="color:#940;" data-reactid="166">)</span><span style="color:#272;" data-reactid="167">)</span><!-- react-text: 168 -->


<!-- /react-text --><span style="color:#272;" data-reactid="169">(</span><span style="color:#687868;font-weight:bold;" data-reactid="170">defn</span><!-- react-text: 171 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="172">undo-button</span><!-- react-text: 173 --> <!-- /react-text --><span style="color:#940;" data-reactid="174">[</span><span style="color:#940;" data-reactid="175">]</span><!-- react-text: 176 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="177">(</span><span style="color:#687868;font-weight:bold;" data-reactid="178">let</span><!-- react-text: 179 --> <!-- /react-text --><span style="color:#44a;" data-reactid="180">[</span><!-- react-text: 181 -->n <!-- /react-text --><span style="color:#272;" data-reactid="182">(</span><span style="color:#687868;font-weight:bold;" data-reactid="183">count</span><!-- react-text: 184 --> @undo-list<!-- /react-text --><span style="color:#272;" data-reactid="185">)</span><span style="color:#44a;" data-reactid="186">]</span><!-- react-text: 187 -->
    <!-- /react-text --><span style="color:#44a;" data-reactid="188">[</span><span style="color:blue;" data-reactid="189">:input</span><!-- react-text: 190 --> <!-- /react-text --><span style="color:#272;" data-reactid="191">{</span><span style="color:blue;" data-reactid="192">:type</span><!-- react-text: 193 --> <!-- /react-text --><span style="color:green;" data-reactid="194">&quot;button&quot;</span><!-- react-text: 195 --> <!-- /react-text --><span style="color:blue;" data-reactid="196">:on-click</span><!-- react-text: 197 --> undo
             <!-- /react-text --><span style="color:blue;" data-reactid="198">:disabled</span><!-- react-text: 199 --> <!-- /react-text --><span style="color:#940;" data-reactid="200">(</span><span style="color:#687868;font-weight:bold;" data-reactid="201">zero?</span><!-- react-text: 202 --> n<!-- /react-text --><span style="color:#940;" data-reactid="203">)</span><!-- react-text: 204 -->
             <!-- /react-text --><span style="color:blue;" data-reactid="205">:value</span><!-- react-text: 206 --> <!-- /react-text --><span style="color:#940;" data-reactid="207">(</span><span style="color:#687868;font-weight:bold;" data-reactid="208">str</span><!-- react-text: 209 --> <!-- /react-text --><span style="color:green;" data-reactid="210">&quot;Undo (&quot;</span><!-- react-text: 211 --> n <!-- /react-text --><span style="color:green;" data-reactid="212">&quot;)&quot;</span><span style="color:#940;" data-reactid="213">)</span><span style="color:#272;" data-reactid="214">}</span><span style="color:#44a;" data-reactid="215">]</span><span style="color:#940;" data-reactid="216">)</span><span style="color:#272;" data-reactid="217">)</span><!-- react-text: 218 -->

<!-- /react-text --><span style="color:#272;" data-reactid="219">(</span><span style="color:#687868;font-weight:bold;" data-reactid="220">defn</span><!-- react-text: 221 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="222">todomvc-with-undo</span><!-- react-text: 223 --> <!-- /react-text --><span style="color:#940;" data-reactid="224">[</span><span style="color:#940;" data-reactid="225">]</span><!-- react-text: 226 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="227">(</span><span style="color:#687868;font-weight:bold;" data-reactid="228">add-watch</span><!-- react-text: 229 --> state <!-- /react-text --><span style="color:blue;" data-reactid="230">::undo-watcher</span><!-- react-text: 231 -->
             <!-- /react-text --><span style="color:#44a;" data-reactid="232">(</span><span style="color:#687868;font-weight:bold;" data-reactid="233">fn</span><!-- react-text: 234 --> <!-- /react-text --><span style="color:#272;" data-reactid="235">[</span><!-- react-text: 236 -->_ _ old-state _<!-- /react-text --><span style="color:#272;" data-reactid="237">]</span><!-- react-text: 238 -->
               <!-- /react-text --><span style="color:#272;" data-reactid="239">(</span><span style="color:#687868;font-weight:bold;" data-reactid="240">swap!</span><!-- react-text: 241 --> undo-list <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="242">conj</span><!-- react-text: 243 --> old-state<!-- /react-text --><span style="color:#272;" data-reactid="244">)</span><span style="color:#44a;" data-reactid="245">)</span><span style="color:#940;" data-reactid="246">)</span><!-- react-text: 247 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="248">[</span><span style="color:blue;" data-reactid="249">:div</span><!-- react-text: 250 -->
   <!-- /react-text --><span style="color:#44a;" data-reactid="251">[</span><!-- react-text: 252 -->undo-button<!-- /react-text --><span style="color:#44a;" data-reactid="253">]</span><!-- react-text: 254 -->
   <!-- /react-text --><span style="color:#44a;" data-reactid="255">[</span><span style="color:#687868;font-weight:bold;" data-reactid="256">todomvc/todo-app</span><span style="color:#44a;" data-reactid="257">]</span><span style="color:#940;" data-reactid="258">]</span><span style="color:#272;" data-reactid="259">)</span></pre></pre></div></div></div></div></div><a href="https://github.com/reagent-project/reagent" class="github-badge" data-reactid="260"><img style="position:absolute;top:0;left:0;border:0;" alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png" data-reactid="261"/></a></div></div></div><script>var pageConfig = {"page-path":"/news/cloact-reagent-undo-demo.html"}</script><script src="js/main.js?1489184436743" type="text/javascript"></script></body></html>