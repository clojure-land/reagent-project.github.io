<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>## Question</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Reagent</span> <span class="project-version">0.9.0-rc3</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="BatchingAndTiming.html"><div class="inner"><span>Batching and Timing: How Reagent Renders Changes to Application State</span></div></a></li><li class="depth-1 "><a href="CljsjsReactProblems.html"><div class="inner"><span>Question</span></div></a></li><li class="depth-1  current"><a href="ComponentNotRerendering.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="ControlledInputs.html"><div class="inner"><span>Controlled inputs</span></div></a></li><li class="depth-1 "><a href="CreatingReagentComponents.html"><div class="inner"><span>#### Not An Absolute Introduction</span></div></a></li><li class="depth-1 "><a href="InteropWithReact.html"><div class="inner"><span>Interop with React</span></div></a></li><li class="depth-1 "><a href="ManagingState.html"><div class="inner"><span>Managing state: atoms, cursors, Reactions, and tracking</span></div></a></li><li class="depth-1 "><a href="MyAttributesAreMissing.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="README.html"><div class="inner"><span># Tutorials</span></div></a></li><li class="depth-1 "><a href="ReactFeatures.html"><div class="inner"><span>React Features</span></div></a></li><li class="depth-1 "><a href="UsingAnEntity.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="UsingHiccupToDescribeHTML.html"><div class="inner"><span>Using Hiccup to Describe HTML</span></div></a></li><li class="depth-1 "><a href="UsingRefs.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="UsingSquareBracketsInsteadOfParens.html"><div class="inner"><span># Components</span></div></a></li><li class="depth-1 "><a href="WhenDoComponentsUpdate.html"><div class="inner"><span># Components Are Reactive</span></div></a></li><li class="depth-1 "><a href="dangerouslySetInnerHTML.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="development.html"><div class="inner"><span>Reagent development</span></div></a></li><li class="depth-1 "><a href="material-ui.html"><div class="inner"><span>Material-UI</span></div></a></li><li class="depth-1 "><a href="smooth-ui.html"><div class="inner"><span>Smooth UI</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 branch"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span></span></div></div></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reagent</span></div></div></li><li class="depth-2 branch"><a href="reagent.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="reagent.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-2"><a href="reagent.dom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dom</span></div></a></li><li class="depth-3"><a href="reagent.dom.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-3 branch"><a href="reagent.impl.batching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>batching</span></div></a></li><li class="depth-3 branch"><a href="reagent.impl.component.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>component</span></div></a></li><li class="depth-3 branch"><a href="reagent.impl.template.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>template</span></div></a></li><li class="depth-3"><a href="reagent.impl.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="reagent.interop.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>interop</span></div></a></li><li class="depth-2"><a href="reagent.ratom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ratom</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h3><a href="#question" name="question"></a>Question</h3>
<p>My component is not re-rendering, what’s wrong?</p>
<h3><a href="#answer" name="answer"></a>Answer</h3>
<p>Ask yourself this question: why do you think the Component should have re-rendered? There’s two possible answers:  - a ratom (used by the Component) changed  - the props for (arguments to) the Component changed</p>
<p>We’ll deal with these two cases seperately.</p>
<h3><a href="#a-ratom-changed" name="a-ratom-changed"></a>A Ratom Changed</h3>
<p>If a ratom changes but your Component doesn’t update, then the gotchas to look out for are: 1. Make sure you are using a <code>reagent.core/atom</code> (i.e. a Reagent ratom) instead of a normal <code>clojure.core/atom</code>. Carefully check the <code>require</code> at the top of the <code>ns</code>. Components are only reactive with respect to Reagent ratoms. They don’t react to changes in a Clojure atom. 2. Make sure you actually <code>deref</code> your ratom (e.g. <code>@app-state</code>) during the render function of your component. It is a common mistake for people to forget the leading <code>@</code>. Note that derefs that happen outside of the render function (such as during event handlers) do not make your component reactive to that ratom. 3. Make sure your ratom will survive a rerender. Either declare it as a global var, or use a form-2 or form-3 component. <a href="https://github.com/reagent-project/reagent-cookbook/tree/master/basics/component-level-state">Read this</a> if you want to understand why. 4. If you put your ratom in a form-2 or form-3 component, be sure you are calling that function using <code>[square brackets]</code>, not <code>(parenthesis)</code>. When function (component) is called using <code>( )</code> Reagent doesn’t create new component, but instead just places the function’s return value into current component. In this case the function closure which should hold the local state doesn’t work. 5. Make sure to <code>deref</code> your ratom outside of a seq or wrap that seq in a <code>doall</code>. See this <a href="https://github.com/reagent-project/reagent/issues/18">related issue</a>.</p>
<h3><a href="#props-change" name="props-change"></a>Props Change</h3>
<p>If the props to a Component change, but it doesn’t appear to re-render, then the cause will be this rookie mistake: you forgot to repeat the parameters in the inner, anonymous render function.</p>
<pre><code class="clj">(defn outer 
  [a b c]            ;; &lt;--- parameters
  ;;  ....
  (fn [a b c]        ;; &lt;--- forgetting to repeat parameters here is the mistake
    [:div
      (str a b c)]))
</code></pre>
<p>If you forget, the component renderer will stubbornly only ever render the original parameter values, not the updated ones, which can be baffling for a beginner.</p>
<p>Remember, <code>outer</code> is called once per component instance. The parameters to <code>outer</code> will hold the initial parameter values. The inner renderer on the other hand, will be called by Reagent many times and, each time, potentially with alternative parameter values, but unless you repeat the parameters on the renderer it will close over those initial values in <code>outer</code>. As a result, the component renderer will stubbornly only ever render the original parameter values, not the updated ones. </p>
<hr />
<p>Up: <a href="../README.html">FAQ Index</a>      </p></div></div></div></body></html>