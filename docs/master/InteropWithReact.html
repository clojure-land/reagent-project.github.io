<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Interop with React</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Reagent</span> <span class="project-version">0.9.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="BatchingAndTiming.html"><div class="inner"><span>Batching and Timing: How Reagent Renders Changes to Application State</span></div></a></li><li class="depth-1 "><a href="CljsjsReactProblems.html"><div class="inner"><span>Question</span></div></a></li><li class="depth-1 "><a href="ComponentNotRerendering.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="ControlledInputs.html"><div class="inner"><span>Controlled inputs</span></div></a></li><li class="depth-1 "><a href="CreatingReagentComponents.html"><div class="inner"><span>#### Not An Absolute Introduction</span></div></a></li><li class="depth-1  current"><a href="InteropWithReact.html"><div class="inner"><span>Interop with React</span></div></a></li><li class="depth-1 "><a href="ManagingState.html"><div class="inner"><span>Managing state: atoms, cursors, Reactions, and tracking</span></div></a></li><li class="depth-1 "><a href="MyAttributesAreMissing.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="README.html"><div class="inner"><span># Tutorials</span></div></a></li><li class="depth-1 "><a href="ReactFeatures.html"><div class="inner"><span>React Features</span></div></a></li><li class="depth-1 "><a href="UsingAnEntity.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="UsingHiccupToDescribeHTML.html"><div class="inner"><span>Using Hiccup to Describe HTML</span></div></a></li><li class="depth-1 "><a href="UsingRefs.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="UsingSquareBracketsInsteadOfParens.html"><div class="inner"><span># Components</span></div></a></li><li class="depth-1 "><a href="WhenDoComponentsUpdate.html"><div class="inner"><span># Components Are Reactive</span></div></a></li><li class="depth-1 "><a href="dangerouslySetInnerHTML.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="development.html"><div class="inner"><span>Reagent development</span></div></a></li><li class="depth-1 "><a href="material-ui.html"><div class="inner"><span>Material-UI</span></div></a></li><li class="depth-1 "><a href="smooth-ui.html"><div class="inner"><span>Smooth UI</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 branch"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span></span></div></div></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reagent</span></div></div></li><li class="depth-2 branch"><a href="reagent.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="reagent.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-2"><a href="reagent.dom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dom</span></div></a></li><li class="depth-3"><a href="reagent.dom.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-3 branch"><a href="reagent.impl.batching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>batching</span></div></a></li><li class="depth-3 branch"><a href="reagent.impl.component.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>component</span></div></a></li><li class="depth-3 branch"><a href="reagent.impl.template.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>template</span></div></a></li><li class="depth-3"><a href="reagent.impl.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="reagent.interop.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>interop</span></div></a></li><li class="depth-2"><a href="reagent.ratom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ratom</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#interop-with-react" name="interop-with-react"></a>Interop with React</h1>
<p>A little understanding of what Reagent is doing really helps when trying to use React libraries and reagent together.</p>
<h2><a href="#creating-react-elements-directly" name="creating-react-elements-directly"></a>Creating React Elements directly</h2>
<p>The <code>reagent.core/create-element</code> function simply calls React’s <code>createElement</code> function (and therefore, it expects either a string representing an HTML element or a React Component).</p>
<p>As an example, here are four ways to create the same element:</p>
<pre><code class="clojure">(defn integration []
  [:div
   [:div.foo "Hello " [:strong "world"]]

   (r/create-element "div"
                     #js{:className "foo"}
                     "Hello "
                     (r/create-element "strong"
                                        #js{}
                                        "world"))

   (r/create-element "div"
                     #js{:className "foo"}
                     "Hello "
                     (r/as-element [:strong "world"]))

   [:div.foo "Hello " (r/create-element "strong"
                                        #js{}
                                        "world")]])

(defn mount-root []
  (reagent/render [integration]
    (.getElementById js/document "app")))
</code></pre>
<p>This works because <code>reagent/render</code> itself expects (1) a React element or (2) a Hiccup form. If passed an element, it just uses it. If passed a Hiccup, it creats a (cached) React component and then creates an element from that component.</p>
<h2><a href="#creating-react-elements-from-hiccup-forms" name="creating-react-elements-from-hiccup-forms"></a>Creating React Elements from Hiccup forms</h2>
<p>The <code>reagent.core/as-element</code> function creates a React element from a Hiccup form. In the previous section, we discussed how <code>reagent/render</code> expects either (1) a Hiccup form or (2) a React Element. If it encounters a Hiccup form, it calls <code>as-element</code> on it. When you have a React component that wraps children, you can pass Hiccup forms to it wrapped in <code>as-element</code>.</p>
<h2><a href="#creating-reagent-components-from-react-components" name="creating-reagent-components-from-react-components"></a>Creating Reagent “Components” from React Components</h2>
<p>The function <code>reagent/adapt-react-class</code> will turn a React Component into something that can be placed into the first position of a Hiccup form, as if it were a Reagent function. Take, for example the react-flip-move library and assume that it has been properly imported as a React Component called <code>FlipMove</code>. By wrapping FlipMove with <code>adapt-react-class</code>, we can use it in a Hiccup form:</p>
<pre><code class="clojure">(defn top-articles [articles]
  [(reagent/adapt-react-class FlipMove)
   {:duration 750
    :easing "ease-out"}
   articles]
</code></pre>
<p>There is also a convenience mechanism <code>:&gt;</code> (colon greater-than) that shortens this and avoid some parenthesis:</p>
<pre><code class="clojure">(defn top-articles [articles]
  [:&gt; FlipMove
   {:duration 750
    :easing "ease-out"}
   articles]
</code></pre>
<p>This is the equivalent JavaScript:</p>
<pre><code class="clojure">const TopArticles = ({ articles }) =&gt; (
  &lt;FlipMove duration={750} easing="ease-out"&gt;
    {articles}
  &lt;/FlipMove&gt;
);
</code></pre>
<h2><a href="#creating-react-components-from-reagent-components" name="creating-react-components-from-reagent-components"></a>Creating React Components from Reagent “Components”</h2>
<p>The <code>reagent/reactify-component</code> will take a Form-1, Form-2, or Form-3 reagent “component”. For example:</p>
<pre><code class="clojure">(defn exported [props]
  [:div "Hi, " (:name props)])

(def react-comp (r/reactify-component exported))

(defn could-be-jsx []
  (r/create-element react-comp #js{:name "world"}))
</code></pre>
<p>Note:</p>
<ul>
  <li><code>adapt-react-class</code> and <code>reactify-component</code> are not perfectly symmetrical, because <code>reactify-component</code> requires that the reagent component accept everything in a single props map, including its children.</li>
</ul>
<h2><a href="#example-decorator-higher-order-components" name="example-decorator-higher-order-components"></a>Example: “Decorator” Higher-Order Components</h2>
<p>Some React libraries use the decorator pattern: a React component which takes a component as an argument and returns a new component as its result. One example is the React DnD library. We will need to use both <code>adapt-react-class</code> and <code>reactify-component</code> to move back and forth between React and reagent:</p>
<pre><code class="clojure">(def react-dnd-component
  (let [decorator (DragDropContext HTML5Backend)]
    (reagent/adapt-react-class
      (decorator (reagent/reactify-component top-level-component)))))
</code></pre>
<p>This is the equivalent JavaScript:</p>
<pre><code class="clojure">import HTML5Backend from 'react-dnd-html5-backend';
import { DragDropContext } from 'react-dnd';

class TopLevelComponent {
  /* ... */
}

export default DragDropContext(HTML5Backend)(TopLevelComponent);
</code></pre>
<h2><a href="#example-function-as-child-components" name="example-function-as-child-components"></a>Example: Function-as-child Components</h2>
<p>Some React components expect a function as their only child. React AutoSizer is one such example.</p>
<pre><code class="clojure">[(reagent/adapt-react-class AutoSizer)
 {}
 (fn [dims]
  (let [dims (js-&gt;clj dims :keywordize-keys true)]
   (reagent/as-element [my-component (:height dims)])))]
</code></pre>
<h2><a href="#getting-props-and-children-of-current-component" name="getting-props-and-children-of-current-component"></a>Getting props and children of current component</h2>
<p>Because you just pass arguments to reagent functions, you typically don’t need to think about “props” and “children” as distinct things. But Reagent does make a distinction and it is helpful to understand this, particularly when interoperating with native elements and React libraries.</p>
<p>Specifically, if the first argument to your Reagent function is a map, that is assigned to <code>this.props</code> of the underlying Reagent component. All other arguments are assigned as children to <code>this.props.children</code>.</p>
<p>When interacting with native React components, it may be helpful to access props and children, which you can do with <code>reagent.core/current-component</code>. This function returns an object that allows you retrieve the props and children passed to the current component.</p>
<p>Beware that <code>current-component</code> is only valid in component functions, and must be called outside of e.g. event handlers and <code>for</code> expressions, so it’s safest to always put the call at the top, as in <code>my-div</code> here:</p>
<pre><code class="clojure">(ns example
  (:require [reagent.core :as r]))

(defn my-div []
  (let [this (r/current-component)]
    (into [:div.custom (r/props this)]
          (r/children this))))

(defn call-my-div []
  [:div
    [my-div "Some text."]
    [my-div {:style {:font-weight 'bold}}
      [:p "Some other text in bold."]]])
</code></pre>
<h2><a href="#react-features" name="react-features"></a>React Features</h2>
<ul>
  <li><a href="./ReactFeatures.html">React Features and how to use them in Reagent</a></li>
</ul>
<h2><a href="#examples" name="examples"></a>Examples</h2>
<ul>
  <li><a href="../examples/material-ui/src/example/core.cljs">Material-UI</a></li>
  <li><a href="../examples/react-sortable-hoc/src/example/core.cljs">React-sortable-hoc</a></li>
</ul></div></div></div></body></html>