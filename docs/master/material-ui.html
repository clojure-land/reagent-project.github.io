<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Material-UI</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Reagent</span> <span class="project-version">1.0.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="BatchingAndTiming.html"><div class="inner"><span>Batching and Timing: How Reagent Renders Changes to Application State</span></div></a></li><li class="depth-1 "><a href="CljsjsReactProblems.html"><div class="inner"><span>Question</span></div></a></li><li class="depth-1 "><a href="ComponentNotRerendering.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="ControlledInputs.html"><div class="inner"><span>Controlled inputs</span></div></a></li><li class="depth-1 "><a href="CreatingReagentComponents.html"><div class="inner"><span>#### Not An Absolute Introduction</span></div></a></li><li class="depth-1 "><a href="InteropWithReact.html"><div class="inner"><span>Interop with React</span></div></a></li><li class="depth-1 "><a href="ManagingState.html"><div class="inner"><span>Managing state: atoms, cursors, Reactions, and tracking</span></div></a></li><li class="depth-1 "><a href="MyAttributesAreMissing.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="README.html"><div class="inner"><span># Tutorials</span></div></a></li><li class="depth-1 "><a href="ReactFeatures.html"><div class="inner"><span>React Features</span></div></a></li><li class="depth-1 "><a href="UsingAnEntity.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="UsingHiccupToDescribeHTML.html"><div class="inner"><span>Using Hiccup to Describe HTML</span></div></a></li><li class="depth-1 "><a href="UsingRefs.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="UsingSquareBracketsInsteadOfParens.html"><div class="inner"><span># Components</span></div></a></li><li class="depth-1 "><a href="WhenDoComponentsUpdate.html"><div class="inner"><span># Components Are Reactive</span></div></a></li><li class="depth-1 "><a href="dangerouslySetInnerHTML.html"><div class="inner"><span>## Question</span></div></a></li><li class="depth-1 "><a href="development.html"><div class="inner"><span>Reagent development</span></div></a></li><li class="depth-1  current"><a href="material-ui.html"><div class="inner"><span>Material-UI</span></div></a></li><li class="depth-1 "><a href="smooth-ui.html"><div class="inner"><span>Smooth UI</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 branch"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span></span></div></div></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reagent</span></div></div></li><li class="depth-2 branch"><a href="reagent.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="reagent.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-2"><a href="reagent.dom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dom</span></div></a></li><li class="depth-3"><a href="reagent.dom.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-3 branch"><a href="reagent.impl.batching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>batching</span></div></a></li><li class="depth-3 branch"><a href="reagent.impl.component.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>component</span></div></a></li><li class="depth-3 branch"><a href="reagent.impl.template.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>template</span></div></a></li><li class="depth-3"><a href="reagent.impl.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="reagent.interop.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>interop</span></div></a></li><li class="depth-2"><a href="reagent.ratom.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ratom</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#material-ui" name="material-ui"></a>Material-UI</h1>
<p><a href="../../examples/material-ui/">Example project</a></p>
<p>Material-UI <a href="https://material-ui.com/api/text-field/">TextField</a> has for long time caused problems for Reagent users. The problem is that <code>TextField</code> wraps the <code>input</code> element inside a component so that Reagent is not able to enable input cursor fixes, which are required due to <a href="http://reagent-project.github.io/news/reagent-is-async.html">async rendering</a>.</p>
<p>Good news is that Material-UI v1 has a property that can be used to provide the input component to <code>TextField</code>:</p>
<pre><code class="cljs">(ns example.material-ui
  (:require ["material-ui" :as mui]
            [reagent.core :as r]))

(def text-field (r/adapt-react-class mui/TextField))

(def value (r/atom ""))

(def input-component
  (r/reactify-component
    (fn [props]
      [:input (-&gt; props
                  (assoc :ref (:inputRef props))
                  (dissoc :inputRef))])))

(def example []
  [text-field
   {:value @value
    :on-change #(reset! value (.. e -target -value))
    :InputProps {:inputComponent input-component}}])
</code></pre>
<p><code>reactify-component</code> can be used to convert Reagent component into React component, which can then be passed into Material-UI. The component should be created once (i.e. on top level) to ensure it is not unnecessarily redefined, causing the component to be re-mounted. For some reason Material-UI uses different name for <code>ref</code>, so the <code>inputRef</code> property should be renamed by the input component.</p>
<h2><a href="#wrapping-for-easy-use" name="wrapping-for-easy-use"></a>Wrapping for easy use</h2>
<p>Instead of providing <code>:InputProps :inputComponent</code> option to every <code>TextField</code>, it is useful to wrap the <code>TextField</code> component in a way that the option is added always:</p>
<pre><code class="cljs">(defn text-field [props &amp; children]
  (let [props (-&gt; props
                  (assoc-in [:InputProps :inputComponent] input-component)
                  rtpl/convert-prop-value)]
    (apply r/create-element mui/TextField props (map r/as-element children))))
</code></pre>
<p>Here <code>r/create-element</code> and <code>reagent.impl.template/convert-prop-value</code> achieve the same as what <code>adapt-react-class</code> does, but allows modifying the props.</p>
<p><strong>Check the example project for complete code.</strong> Some additional logic is required to ensure option like <code>:multiline</code> and <code>:select</code> work correctly, as they affect how the <code>inputComponent</code> should work.</p>
<p>TODO: <code>:multiline</code> <code>TextField</code> without <code>:rows</code> (i.e. automatic height) doesn’t work, because that requires Material-UI <code>Input/Textarea</code>, which doesn’t work with Reagent cursor fix.</p></div></div></div></body></html>